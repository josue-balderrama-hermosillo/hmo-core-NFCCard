<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Josue Balderrama — Digital Card</title>
  <meta name="description" content="BIM/VDC Innovation — Hermosillo & BIM GEN. Connect, view demos, and save contact." />
  <!-- Open Graph -->
  <meta property="og:title" content="Josue Balderrama — Digital Card" />
  <meta property="og:description" content="BIM/VDC Innovation — Hermosillo & BIM GEN. Connect, view demos, and save contact." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://raw.githubusercontent.com/josue-balderrama-hermosillo/hmo-core-NFCCard/refs/heads/main/Screenshot%202025-09-04%20173221.png" />
  <meta name="theme-color" content="#FF6A00" />

  <!-- Inter font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">

  <!-- Tailwind via CDN -->
  <script src="https://cdn.tailwindcss.com/3.4.10"></script>
  <script>
    tailwind.config = { theme: { extend: { borderRadius: { '2xl': '1.25rem' }, boxShadow: { soft: '0 10px 30px rgba(0,0,0,0.08)' } } } }
  </script>

  <!-- Icons + QR -->
  <script src="https://unpkg.com/lucide@0.454.0/dist/umd/lucide.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/qrious@4.0.2/dist/qrious.min.js"></script>

  <style>
    :root { --brand-orange:#FF6A00; --brand-navy:#2f3b52; --brand-gray:#F5F7FA; --mark-bg:var(--brand-orange); }
    body { font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }

    /* Brand utilities */
    .bg-brand { background-color: var(--brand-orange); }
    .text-brand { color: var(--brand-orange); }
    .border-brand { border-color: var(--brand-orange); }
    .bg-brand-navy { background-color: var(--brand-navy); }
    .bg-brand-gray { background-color: var(--brand-gray); }

    /* Brand mark box */
    .brand-mark { background: var(--mark-bg); border-radius:.5rem; display:grid; place-items:center; overflow:hidden; }
    .brand-mark img { width:100%; height:100%; object-fit:contain; object-position:center; }

    /* AU image */
    .au-logo img { height:28px; width:auto; display:block; border-radius:.5rem; }
    @media (min-width: 640px) { .au-logo img { height:32px; } }

    /* Footer logos & switches */
    .footer-logo{height:28px;width:auto;display:block;object-fit:contain;object-position:center}
    @media (min-width:640px){.footer-logo{height:32px}}
    .switch-btn{transition:all .15s ease;border-width:1px}
    .switch-btn img{filter:grayscale(100%) brightness(.38)}
    #btnHmoImg{filter:grayscale(100%) brightness(.38)!important}
    .switch-btn.is-inactive img{opacity:.75}
    .switch-btn.is-active{border-color:var(--brand-orange);border-width:2px}
    .switch-btn:active{transform:scale(.98)}
    .switch-hint{user-select:none}

    /* ---- Live preview inside cards ---- */
    .preview-wrap{position:relative; overflow:hidden; border-top-left-radius:1rem; border-top-right-radius:1rem;}
    .preview-iframe{position:absolute; inset:0; width:100%; height:100%; border:0; pointer-events:none;}
    .preview-hint{position:absolute; bottom:.5rem; right:.5rem; background:rgba(255,255,255,.9); font-size:.75rem; padding:.25rem .5rem; border-radius:.5rem;}
    .preview-blocked{position:absolute; inset:0; display:none; place-items:center; text-align:center; background:rgba(248,250,252,.9); color:#334155; padding:1rem;}
    .preview-wrap.is-blocked .preview-blocked{display:grid;}

    /* ---- FLIP Expander ---- */
    .expander-backdrop{position:fixed; inset:0; background:rgba(0,0,0,.6); opacity:0; transition:opacity .25s ease; z-index:100;}
    .expander-backdrop.is-visible{opacity:1;}
    .expander{position:fixed; z-index:110; overflow:hidden; background:#fff; border-radius:1rem; box-shadow:0 10px 30px rgba(0,0,0,.12);}
    .expander.is-animating{transition: left .38s cubic-bezier(.2,.8,.2,1), top .38s cubic-bezier(.2,.8,.2,1), width .38s cubic-bezier(.2,.8,.2,1), height .38s cubic-bezier(.2,.8,.2,1), border-radius .38s cubic-bezier(.2,.8,.2,1);}    
    .expander iframe{border:0; width:100%; height:100%;}
    .expander-toolbar{position:absolute; top:.5rem; right:.5rem; display:flex; gap:.5rem; z-index:5;}
    .expander-toolbar a, .expander-toolbar button{background:var(--brand-orange); color:#fff; font-weight:600; padding:.45rem .7rem; border-radius:.75rem; font-size:.85rem;}

    /* ---- AR section (video phone frame) ---- */
    .phone-portrait{position:relative; aspect-ratio:9/16; border-radius:1rem; overflow:hidden; background:#000;}
    .phone-portrait video{position:absolute; inset:0; width:100%; height:100%; object-fit:cover;}

    /* ---- Modal (How it works) ---- */
    .modal-backdrop{
      position:fixed; inset:0; background:rgba(0,0,0,.6);
      opacity:0; pointer-events:none; transition:opacity .2s ease; z-index:90;
    }
    .modal-backdrop.is-open{ opacity:1; pointer-events:auto; }
    .modal-panel{
      position:fixed; inset:0; display:none;
      align-items:center; justify-content:center;
      z-index:100; opacity:0; pointer-events:none; transition:opacity .2s ease;
    }
    .modal-panel.is-open{ display:flex; opacity:1; pointer-events:auto; }
    .modal-card{ width:min(980px,96vw); max-height:88vh; overflow:auto; background:#fff; border-radius:1rem; }
    .modal-header{display:flex; align-items:center; justify-content:space-between; padding:1rem 1rem 0 1rem;}
    .modal-body{padding:1rem;}
  </style>
</head>
<body class="bg-white text-slate-800">
  <script>
    /* =============================
       THEME + CONTENT CONFIGURATION
       ============================= */
    const THEMES = {
      hmo: {
        key: 'hmo',
        name: 'HERMOSILLO',
        tagline: 'Experience Matters®',
        colors: { orange: '#FF6A00', navy: '#2f3b52', gray: '#F5F7FA' },
        markBg: 'var(--brand-orange)',
        logos: {
          mark: 'https://raw.githubusercontent.com/josue-balderrama-hermosillo/hmo-core-NFCCard/1df5fa35829ad8380eb70e3e75e1d0f3f2dffa95/H2.png',
          wordmark: 'https://raw.githubusercontent.com/josue-balderrama-hermosillo/hmo-core-NFCCard/1df5fa35829ad8380eb70e3e75e1d0f3f2dffa95/H2.png',
          footer: 'https://hermosillo.com/wp-content/uploads/2019/08/horizontal-hermosillo-experience-matters-registered-logo.png'
        },
        site: { url: 'https://hermosillo.com', label: 'hermosillo.com' },
        partner: { name: 'BIM • GEN', url: 'https://bim-gen.com', logo: 'https://raw.githubusercontent.com/josue-balderrama-hermosillo/hmo-core-NFCCard/refs/heads/main/Logo%20BIM%20GEN%20V1%20Morado.png' },
        contact: {
          name: 'Josue Balderrama',
          org: 'Hermosillo',
          titles: 'Core Innovation Lead | Innovation Manager | BIM Specialist',
          email: 'josue.balderrama@hermosillo.com',
          phone: '+528441226347',
          address: {
            street: 'Blvd. Antonio L. Rodriguez 2100 Piso 16-01', city: 'Monterrey', region: 'NL', postal: '64650', country: 'MX'
          }
        },
        heroOrgLine: 'Hermosillo — Design & Construction'
      },
      bimgen: {
        key: 'bimgen',
        name: 'BIM • GEN',
        tagline: 'Automation / Generative Design / Data / AI',
        colors: { orange: '#7C3AED', navy: '#0f172a', gray: '#F6F7FB' },
        markBg: 'var(--brand-orange)',
        logos: {
          mark: 'https://raw.githubusercontent.com/josue-balderrama-hermosillo/hmo-core-NFCCard/refs/heads/main/Logo%20BIM%20GEN%20V1%20Blanco.png',
          wordmark: 'https://raw.githubusercontent.com/josue-balderrama-hermosillo/hmo-core-NFCCard/refs/heads/main/Logo%20BIM%20GEN%20V1%20Blanco.png',
          footer: 'https://raw.githubusercontent.com/josue-balderrama-hermosillo/hmo-core-NFCCard/refs/heads/main/Logo%20BIM%20GEN%20V1%20Morado.png'
        },
        site: { url: 'https://bim-gen.com', label: 'bim-gen.com' },
        partner: { name: 'Hermosillo', url: 'https://hermosillo.com', logo: 'https://hermosillo.com/wp-content/uploads/2019/08/horizontal-hermosillo-experience-matters-registered-logo.png' },
        contact: {
          name: 'Josue Balderrama',
          org: 'BIM GEN',
          titles: 'Co-Founder | Innovation & BIM',
          email: 'j.balderrama@bim-gen.com',
          phone: '+528441226347',
          address: {
            street: 'Colina Brillante', city: 'Monterrey', region: 'NL', postal: '64650', country: 'MX'
          }
        },
        heroOrgLine: 'BIM GEN — BIM Consulting, Automations and Innovative Solutions'
      }
    };

    // Helpers
    const $ = (sel) => document.querySelector(sel);
    const setVar = (k, v) => document.documentElement.style.setProperty(k, v);

    let currentThemeKey = (new URLSearchParams(location.search)).get('brand') || localStorage.getItem('brand') || 'hmo';
    if (!THEMES[currentThemeKey]) currentThemeKey = 'hmo';

    function applyTheme(key) {
      const t = THEMES[key];
      currentThemeKey = key;
      localStorage.setItem('brand', key);

      // Colors
      setVar('--brand-orange', t.colors.orange);
      setVar('--brand-navy', t.colors.navy);
      setVar('--brand-gray', t.colors.gray);
      setVar('--mark-bg', t.markBg);

      // Header brand
      $('#brandName').textContent = t.name;
      $('#brandTagline').textContent = t.tagline;

      // Logos
      $('#logoSmall').src = t.logos.mark;
      $('#logoHero').src  = t.logos.mark;
      const au = $('#auLogo'); if (au) au.src = 'https://raw.githubusercontent.com/josue-balderrama-hermosillo/hmo-core-NFCCard/1df5fa35829ad8380eb70e3e75e1d0f3f2dffa95/upscalemedia-transformed.png';

      // Footer + partner
      $('#logoFooterMain').src = t.logos.footer || t.logos.wordmark || t.logos.mark;
      $('#logoFooterMainLink').href = t.site.url;
      $('#partnerLogo').src = t.partner.logo;
      $('#partnerLogoLink').href = t.partner.url;

      // Contact
      $('#nameText').textContent = t.contact.name;
      $('#titlesText').textContent = t.contact.titles;
      $('#orgLine').textContent = t.heroOrgLine;
      $('#taglineHero').textContent = t.tagline;

      $('#mailLink').href = `mailto:${t.contact.email}`;
      $('#mailLink').textContent = t.contact.email;
      $('#phoneLink').href = `tel:${t.contact.phone}`;
      $('#phoneLink').textContent = formatPhone(t.contact.phone);
      $('#siteLink').href = t.site.url; $('#siteLink').textContent = t.site.label;

      // Share URL
      const url = new URL(location.href);
      url.searchParams.set('brand', key);
      history.replaceState({}, '', url);
      const shareUrl = url.toString();
      $('#shareUrl').value = shareUrl;
      const linkCodeEl = $('#linkCode'); if (linkCodeEl) linkCodeEl.textContent = shareUrl;
      if (window.__qrInstance) window.__qrInstance.set({ value: shareUrl });

      if (typeof updateSwitchUI === 'function') updateSwitchUI(key);
    }
    function formatPhone(p) { return p.replace(/^\+52(\d{3})(\d{3})(\d{4})$/, '+52 ($1) $2 $3'); }
  </script>

  <!-- NAV / HEADER -->
  <header class="sticky top-0 z-40 bg-white/80 backdrop-blur border-b border-slate-200">
    <div class="max-w-6xl mx-auto px-4 h-16 flex items-center justify-between gap-3">
      <div class="flex items-center gap-3 min-w-0">
        <div class="w-7 h-7 brand-mark"><img id="logoSmall" alt="Brand mark" /></div>
        <div class="truncate">
          <span id="brandName" class="font-extrabold tracking-tight"></span>
          <span class="text-slate-400">•</span>
          <span id="brandTagline" class="text-brand font-semibold"></span>
        </div>
      </div>

      <nav class="hidden sm:flex items-center gap-4 text-sm">
        <a href="#showcase" class="hover:text-brand">Demos</a>
        <a href="#ar" class="hover:text-brand">AR</a>
        <a href="#contact" class="hover:text-brand">Contact</a>
      </nav>

      <div class="flex items-center gap-3">
        <div class="flex flex-col items-end gap-1">
          <span class="switch-hint text-[11px] text-slate-500 hidden sm:inline">Tap a logo to switch</span>
          <div id="brandSwitch" class="flex items-center gap-2">
            <button id="btnHmo" class="switch-btn is-inactive inline-flex items-center gap-2 rounded-xl border border-slate-300 px-2 py-1 bg-white" type="button" aria-pressed="false" title="Switch to Hermosillo">
              <img id="btnHmoImg" class="h-6 w-auto" alt="Hermosillo logo"/><span class="text-xs font-semibold hidden sm:inline">Hermosillo</span>
            </button>
            <button id="btnBimgen" class="switch-btn is-inactive inline-flex items-center gap-2 rounded-xl border border-slate-300 px-2 py-1 bg-white" type="button" aria-pressed="false" title="Switch to BIM GEN">
              <img id="btnBimgenImg" class="h-6 w-auto" alt="BIM GEN logo"/><span class="text-xs font-semibold hidden sm:inline">BIM • GEN</span>
            </button>
          </div>
        </div>
        <div class="hidden sm:flex items-center gap-2 au-logo">
          <span class="text-xs text-slate-500">AU 2024 - 2025 Speaker</span>
          <img id="auLogo" loading="lazy" alt="Autodesk University" />
        </div>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <section class="relative">
    <div class="max-w-6xl mx-auto px-4 py-12 grid lg:grid-cols-2 gap-10 items-center">
      <div>
        <div class="bg-brand-navy text-white rounded-2xl p-6 shadow-soft relative overflow-hidden">
          <div class="absolute -right-8 -top-8 w-40 h-40 rounded-full bg-white/5"></div>
          <div class="flex items-center gap-4">
            <div class="w-12 h-12 brand-mark"><img id="logoHero" alt="Brand" /></div>
            <div class="min-w-0">
              <p id="orgLine" class="text-sm text-slate-300"></p>
              <p id="taglineHero" class="text-xs text-brand font-semibold"></p>
            </div>
          </div>

          <div class="mt-6">
            <h1 id="nameText" class="text-3xl font-extrabold tracking-tight">Josue Balderrama</h1>
            <p id="titlesText" class="text-slate-300">Core Innovation Lead • Innovation Manager • BIM Specialist</p>
          </div>

          <div class="mt-6 grid gap-2 text-sm">
            <div class="flex items-center gap-2"><i data-lucide="mail" class="w-4 h-4"></i> <a id="mailLink" class="underline-offset-2 hover:underline" href="#">email</a></div>
            <div class="flex items-center gap-2"><i data-lucide="phone" class="w-4 h-4"></i> <a id="phoneLink" class="underline-offset-2 hover:underline" href="#">phone</a></div>
            <div class="flex items-center gap-2"><i data-lucide="map-pin" class="w-4 h-4"></i> Monterrey, MX</div>
          </div>

          <div class="mt-6 flex flex-wrap gap-3">
            <button id="saveVcf" class="px-4 py-2 rounded-xl bg-white text-slate-900 font-semibold hover:opacity-90">Save Contact (.vcf)</button>
            <a href="https://www.linkedin.com/in/josuebalderrama/" target="_blank" rel="noopener noreferrer" class="px-4 py-2 rounded-xl border border-white/30 hover:bg-white/10">LinkedIn</a>
            <a href="#showcase" class="px-4 py-2 rounded-xl bg-brand text-white font-semibold hover:opacity-90">See Demos</a>
          </div>
        </div>

        <p class="text-xs text-slate-500 mt-3">Scan the QR or tap an NFC card to open this page anywhere.</p>
        <div class="mt-4 flex items-center gap-4">
          <canvas id="qr" class="rounded-2xl border border-slate-200" aria-label="QR code for this card’s URL"></canvas>
          <div>
            <p class="text-sm text-slate-600">Link:</p>
            <code id="linkCode" class="text-xs bg-slate-100 px-2 py-1 rounded">(auto)</code>
          </div>
        </div>
      </div>

      <div>
        <h2 class="text-2xl font-extrabold tracking-tight">A business card that actually does things.</h2>
        <p class="mt-3 text-slate-600">
          This digital card isn’t a static vCard. It’s an interactive microsite with live demos, an AR spot, and a one-tap
          <span class="font-semibold">Save Contact</span>. Switch the focus brand in the header to change colors, logos, and contact data.
        </p>
        <div class="mt-6 flex flex-wrap gap-2">
          <span class="pill inline-flex items-center gap-2 px-3 py-1 rounded-full border border-slate-200 text-slate-700">⚡ NFC + Dynamic QR</span>
          <span class="pill inline-flex items-center gap-2 px-3 py-1 rounded-full border border-slate-200 text-slate-700">📊 Live dashboards</span>
          <span class="pill inline-flex items-center gap-2 px-3 py-1 rounded-full border border-slate-200 text-slate-700">🧠 AI intro bot (optional)</span>
          <span class="pill inline-flex items-center gap-2 px-3 py-1 rounded-full border border-slate-200 text-slate-700">🛠️ ACC / APS demos</span>
        </div>
      </div>
    </div>
  </section>

  <!-- SHOWCASE -->
  <section id="showcase" class="bg-brand-gray py-12">
    <div class="max-w-6xl mx-auto px-4">
      <div class="flex items-baseline justify-between">
        <h3 class="text-xl font-bold">Showcase — Innovation in Action</h3>
        <a href="https://conferences.autodesk.com/flow/autodesk/au2025/sessioncatalog/page/inperson/session/1744090156490001WazM" target="_blank" rel="noopener noreferrer" class="text-brand text-sm font-semibold">AU 2025 Session →</a>
      </div>

      <div class="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mt-6">

        <!-- Card 1 -->
        <article class="group rounded-2xl bg-white shadow-soft border border-slate-100 overflow-hidden cursor-pointer hover:shadow-lg transition"
                 data-title="ACC Dashboards Overnight"
                 data-embed="https://lookerstudio.google.com/embed/reporting/1599824a-4993-4c4c-9932-c220be7565fe/page/qgR"
                 role="button" tabindex="0" aria-label="Open ACC Dashboards Overnight demo">
          <div class="preview-wrap aspect-video bg-slate-100">
            <iframe class="preview-iframe cardPreview"
                    data-src="https://lookerstudio.google.com/embed/reporting/1599824a-4993-4c4c-9932-c220be7565fe/page/qgR"
                    title="ACC Dashboards Preview" loading="lazy" referrerpolicy="no-referrer-when-downgrade"
                    sandbox="allow-scripts allow-same-origin allow-forms allow-popups"></iframe>
            <div class="preview-hint hidden sm:block">Click to interact</div>
            <div class="preview-blocked">Preview not available here. Click to open.</div>
          </div>
          <div class="p-4">
            <h4 class="font-semibold">ACC Dashboards Overnight</h4>
            <p class="text-sm text-slate-600">Automated data pipelines from ACC to live dashboards. Nightly refresh, zero manual work.</p>
            <a class="text-brand font-semibold text-sm" href="https://lookerstudio.google.com/reporting/1599824a-4993-4c4c-9932-c220be7565fe/page/qgR" target="_blank" rel="noopener noreferrer">Open demo</a>
          </div>
        </article>

        <!-- Card 2 -->
        <article class="group rounded-2xl bg-white shadow-soft border border-slate-100 overflow-hidden cursor-pointer hover:shadow-lg transition"
                 data-title="ACC Project Setup (1-Click)"
                 data-embed="https://hmo-core-au2025.streamlit.app/?embed=true"
                 role="button" tabindex="0" aria-label="Open ACC Project Setup demo">
          <div class="preview-wrap aspect-video bg-slate-100">
            <iframe class="preview-iframe cardPreview"
                    data-src="https://hmo-core-au2025.streamlit.app/?embed=true"
                    title="ACC Setup Preview" loading="lazy" referrerpolicy="no-referrer-when-downgrade"
                    sandbox="allow-scripts allow-same-origin allow-forms allow-popups"></iframe>
            <div class="preview-hint hidden sm:block">Click to interact</div>
            <div class="preview-blocked">Preview not available here. Click to open.</div>
          </div>
          <div class="p-4">
            <h4 class="font-semibold">ACC Project Setup (1-Click)</h4>
            <p class="text-sm text-slate-600">Templates configure permissions, folders, issues, reviews, and Build sheets automatically.</p>
            <a class="text-brand font-semibold text-sm" href="https://hmo-core-au2025.streamlit.app/" target="_blank" rel="noopener noreferrer">Open demo</a>
          </div>
        </article>

        <!-- Card 3 -->
        <article class="group rounded-2xl bg-white shadow-soft border border-slate-100 overflow-hidden cursor-pointer hover:shadow-lg transition"
                 data-title="Parametric Budgeting"
                 data-embed="https://hmo-core-parametric-budget.streamlit.app/?embed=true"
                 role="button" tabindex="0" aria-label="Open Parametric Budgeting demo">
          <div class="preview-wrap aspect-video bg-slate-100">
            <iframe class="preview-iframe cardPreview"
                    data-src="https://hmo-core-parametric-budget.streamlit.app/?embed=true"
                    title="Parametric Budgeting Preview" loading="lazy" referrerpolicy="no-referrer-when-downgrade"
                    sandbox="allow-scripts allow-same-origin allow-forms allow-popups"></iframe>
            <div class="preview-hint hidden sm:block">Click to interact</div>
            <div class="preview-blocked">Preview not available here. Click to open.</div>
          </div>
          <div class="p-4">
            <h4 class="font-semibold">Parametric Budgeting</h4>
            <p class="text-sm text-slate-600">Phone-style UI with live 3D preview and cost breakdown. Built for rapid scenario testing.</p>
            <a class="text-brand font-semibold text-sm" href="https://hmo-core-parametric-budget.streamlit.app/" target="_blank" rel="noopener noreferrer">Open demo</a>
          </div>
        </article>

        <!-- Card 4 -->
        <article class="group rounded-2xl bg-white shadow-soft border border-slate-100 overflow-hidden cursor-pointer hover:shadow-lg transition"
                 data-title="Generative Design — Industrial Park"
                 data-embed="./industrial-park-demo.html?embed=1"
                 role="button" tabindex="0" aria-label="Open Industrial Park demo">
          <div class="preview-wrap aspect-video bg-slate-100">
            <iframe class="preview-iframe cardPreview"
                    data-src="./industrial-park-demo.html?embed=1"
                    title="Industrial Park Preview" loading="lazy"
                    sandbox="allow-scripts allow-same-origin"
                    referrerpolicy="no-referrer-when-downgrade"></iframe>
            <div class="preview-hint hidden sm:block">Click to interact</div>
            <div class="preview-blocked">Preview not available here. Click to open.</div>
          </div>
          <div class="p-4">
            <h4 class="font-semibold">Generative Design — Industrial Park</h4>
            <p class="text-sm text-slate-600">Pack buildings A/B/C, grid or spine streets, live KPIs.</p>
            <a class="text-brand font-semibold text-sm" href="./industrial-park-demo.html" target="_blank" rel="noopener noreferrer">Open demo</a>
          </div>
        </article>

      </div>
    </div>
  </section>

  <!-- AR -->
  <section id="ar" class="py-12">
    <div class="max-w-6xl mx-auto px-4 grid lg:grid-cols-2 gap-10 items-center">
      <div>
        <h3 class="text-xl font-bold">AR Spot — See it in your space</h3>
        <p class="mt-2 text-slate-600">
          Watch a quick capture of the AR experience below, or tap <strong>Launch AR Demo</strong> to open the live 8th Wall app.
        </p>
        <div class="mt-4 flex gap-3">
          <a id="arLink" href="https://8th.io/75ewg" target="_blank" rel="noopener noreferrer" class="px-4 py-2 rounded-xl bg-brand text-white font-semibold">Launch AR Demo</a>
          <button id="howBtn" type="button" class="px-4 py-2 rounded-xl border border-slate-300">How it works</button>
        </div>
        <p class="mt-3 text-xs text-slate-500">Use your physical presentation card as the target. Good lighting helps.</p>
      </div>

      <!-- In-card portrait video preview -->
      <div class="rounded-2xl border border-slate-200 p-6">
        <div class="phone-portrait mx-auto max-h-[90vh]">
          <video id="arPreviewVideo" src="https://drive.google.com/file/d/1RQW-fawVDemr3QiF8OnzdkU26_19TRLM/preview" muted autoplay playsinline loop controls></video>
        </div>
        <p class="text-xs text-slate-500 mt-3">Replace <code>./assets/ar-demo.mp4</code> with your 9:16 video of the AR app.</p>
      </div>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact" class="bg-brand-navy text-white py-12">
    <div class="max-w-6xl mx-auto px-4 grid md:grid-cols-2 gap-10 items-center">
      <div>
        <h3 class="text-2xl font-extrabold tracking-tight">Let’s connect</h3>
        <p class="mt-2 text-white/80">Open to collabs around ACC automations, APS integrations, and BIM/VDC innovation.</p>
        <div class="mt-6 grid gap-2 text-sm">
          <div class="flex items-center gap-2"><i data-lucide="mail" class="w-4 h-4"></i> <a id="mailLink2" class="hover:underline" href="#">email</a></div>
          <div class="flex items-center gap-2"><i data-lucide="phone" class="w-4 h-4"></i> <a id="phoneLink2" class="hover:underline" href="#">phone</a></div>
          <div class="flex items-center gap-2"><i data-lucide="globe" class="w-4 h-4"></i> <a id="siteLink" class="hover:underline" href="#" target="_blank" rel="noopener noreferrer">site</a></div>
          <div class="flex items-center gap-2"><i data-lucide="linkedin" class="w-4 h-4"></i> <a class="hover:underline" href="https://www.linkedin.com/in/josuebalderrama/" target="_blank" rel="noopener noreferrer">LinkedIn</a></div>
        </div>
      </div>
      <div class="bg-white text-slate-800 rounded-2xl p-6 shadow-soft">
        <h4 class="font-semibold">Share this card</h4>
        <p class="text-sm text-slate-600">Tap the NFC card or scan the QR. You can also copy the link below.</p>
        <div class="mt-4 flex items-center gap-2">
          <input id="shareUrl" class="flex-1 rounded-xl border border-slate-300 px-3 py-2" value="" readonly>
          <button id="copyBtn" class="px-3 py-2 rounded-xl bg-brand text-white font-semibold">Copy</button>
        </div>
        <p id="copiedMsg" class="text-xs text-green-600 mt-2 hidden">Copied!</p>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="py-8 text-center text-sm text-slate-500">
    <div class="max-w-6xl mx-auto px-4">
      <div class="flex items-center justify-center gap-3">
        <a id="logoFooterMainLink" href="#" target="_blank" rel="noopener">
          <img id="logoFooterMain" class="footer-logo object-contain" loading="lazy" alt="Main brand" />
        </a>
        <span>•</span>
        <a id="partnerLogoLink" href="#" target="_blank" rel="noopener">
          <img id="partnerLogo" class="footer-logo object-contain" loading="lazy" alt="Partner logo" />
        </a>
      </div>
      <p class="mt-2">© <span id="year"></span> Josue Balderrama — Core Innovation Lead</p>
    </div>
  </footer>

  <!-- HOW IT WORKS MODAL -->
  <div id="howBackdrop" class="modal-backdrop"></div>
  <div id="howPanel" class="modal-panel" aria-hidden="true">
    <div class="modal-card shadow-soft border border-slate-100">
      <div class="modal-header">
        <h3 class="text-2xl font-extrabold tracking-tight px-3">How it works</h3>
        <button id="howClose" class="px-3 py-2 rounded-xl bg-brand text-white font-semibold mr-3">Close</button>
      </div>
      <div class="modal-body">
        <div class="grid md:grid-cols-3 gap-6">
          <div class="md:col-span-2">
            <p class="text-slate-600 mb-3">Quick steps to get the best AR experience.</p>
            <ul class="space-y-3 text-slate-700">
              <li class="flex gap-2"><i data-lucide="external-link" class="w-5 h-5 shrink-0 mt-0.5"></i><span><strong>Tap “Launch AR Demo”.</strong> This opens 8th Wall in a new tab where the camera can be used.</span></li>
              <li class="flex gap-2"><i data-lucide="shield-check" class="w-5 h-5 shrink-0 mt-0.5"></i><span><strong>Allow Camera.</strong> When prompted, grant camera access.</span></li>
              <li class="flex gap-2"><i data-lucide="credit-card" class="w-5 h-5 shrink-0 mt-0.5"></i><span><strong>Aim at your presentation card.</strong> Use this card as the tracking target. Good lighting helps.</span></li>
              <li class="flex gap-2"><i data-lucide="move" class="w-5 h-5 shrink-0 mt-0.5"></i><span><strong>Move slowly.</strong> Back up ~0.5–1.0 m if needed to get the full card in view.</span></li>
              <li class="flex gap-2"><i data-lucide="life-buoy" class="w-5 h-5 shrink-0 mt-0.5"></i><span><strong>Troubleshooting:</strong> If tracking is lost, re-center on the card or relaunch the app.</span></li>
            </ul>
          </div>
          <div>
            <label class="block text-sm font-semibold text-slate-600 mb-2">Target image</label>
            <div class="rounded-xl border border-slate-200 bg-slate-50 p-2">
              <img
                src="https://raw.githubusercontent.com/josue-balderrama-hermosillo/hmo-core-NFCCard/refs/heads/main/20250908_160330.jpg"
                alt="Presentation card target"
                class="w-full h-[260px] object-contain rounded-lg bg-white" />
            </div>
            <p class="text-xs text-slate-500 mt-2">Use your physical presentation card as the target when the AR app opens.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Icons
    lucide.createIcons();

    // QR
    const qrElem = document.getElementById('qr');
    window.__qrInstance = new QRious({ element: qrElem, value: location.href, size: 120, level: 'M' });

    // Share URL init
    document.getElementById('shareUrl').value = location.href;
    const linkCodeEl = document.getElementById('linkCode'); if (linkCodeEl) linkCodeEl.textContent = location.href;

    // Copy link
    document.getElementById('copyBtn').addEventListener('click', async () => {
      await navigator.clipboard.writeText(document.getElementById('shareUrl').value);
      document.getElementById('copiedMsg').classList.remove('hidden');
      setTimeout(() => document.getElementById('copiedMsg').classList.add('hidden'), 1500);
    });

    // Theme switch UI
    function updateSwitchUI(key){
      const h=document.getElementById('btnHmo');
      const b=document.getElementById('btnBimgen');
      [h,b].forEach(btn=>{btn.classList.remove('is-active');btn.classList.add('is-inactive');btn.setAttribute('aria-pressed','false');});
      const active = key==='bimgen'? b : h;
      active.classList.add('is-active'); active.classList.remove('is-inactive'); active.setAttribute('aria-pressed','true');
    }
    try{ document.getElementById('btnHmoImg').src = THEMES.hmo.logos.mark; document.getElementById('btnBimgenImg').src = THEMES.bimgen.logos.mark; }catch{}
    const btnHmo = document.getElementById('btnHmo'); const btnBimgen = document.getElementById('btnBimgen');
    if(btnHmo) btnHmo.addEventListener('click', ()=>applyTheme('hmo'));
    if(btnBimgen) btnBimgen.addEventListener('click', ()=>applyTheme('bimgen'));

    // vCard (CRLF newlines)
    function buildVCard(t) {
      const a = t.contact.address; const nl = '\r\n';
      const parts = t.contact.name.trim().split(' '); const last = parts.pop(); const first = parts.join(' ');
      return [
        'BEGIN:VCARD','VERSION:3.0',`N:${last};${first};;;`,`FN:${t.contact.name}`,`ORG:${t.contact.org}`,
        `TITLE:${t.contact.titles}`,`EMAIL;TYPE=INTERNET:${t.contact.email}`,`TEL;TYPE=CELL:${t.contact.phone}`,
        `ADR;TYPE=WORK:;;${a.street};${a.city};${a.region};${a.postal};${a.country}`,`URL:${location.href}`,'END:VCARD'
      ].join(nl);
    }
    document.getElementById('saveVcf').addEventListener('click', () => {
      const t = THEMES[currentThemeKey]; const vcf = buildVCard(t);
      const blob = new Blob([vcf], { type: 'text/vcard;charset=utf-8' });
      const a = document.createElement('a'); a.href = URL.createObjectURL(blob);
      a.download = `Contact-${t.contact.org.replace(/\s+/g,'')}.vcf`; a.click();
      setTimeout(() => URL.revokeObjectURL(a.href), 1000);
    });

    // Boot theme + footer year + contact mirror
    applyTheme(currentThemeKey); try{ updateSwitchUI(currentThemeKey); }catch{}
    document.getElementById('year').textContent = new Date().getFullYear();
    const syncContacts = () => { const t = THEMES[currentThemeKey];
      document.getElementById('mailLink2').href = `mailto:${t.contact.email}`; document.getElementById('mailLink2').textContent = t.contact.email;
      document.getElementById('phoneLink2').href = `tel:${t.contact.phone}`; document.getElementById('phoneLink2').textContent = (t.contact.phone);
    };
    syncContacts(); const _applyThemeOrig = applyTheme; applyTheme = function(key){ _applyThemeOrig(key); syncContacts(); };

    // ---------- Lazy-load live previews inside cards ----------
    const previewIframes = document.querySelectorAll('.cardPreview');
    const io = new IntersectionObserver((entries) => {
      entries.forEach(e => {
        if (e.isIntersecting) {
          const ifr = e.target;
          if (!ifr.src && ifr.dataset.src) {
            ifr.src = ifr.dataset.src;
            const wrap = ifr.closest('.preview-wrap');
            const timer = setTimeout(() => { wrap && wrap.classList.add('is-blocked'); }, 3000);
            ifr.addEventListener('load', () => { clearTimeout(timer); }, { once:true });
          }
          io.unobserve(ifr);
        }
      });
    }, { rootMargin: '200px' });
    previewIframes.forEach(ifr => io.observe(ifr));
    document.querySelectorAll('#showcase article a').forEach(a => a.addEventListener('click', e => e.stopPropagation()));

    // ---------- FLIP open from card ----------
    function cleanOpenUrl(url) {
      try {
        const u = new URL(url, location.href);
        u.searchParams.delete('embed');
        if (u.hostname.includes('lookerstudio.google.com') && u.pathname.includes('/embed/')) {
          u.pathname = u.pathname.replace('/embed/', '/reporting/');
        }
        return u.toString();
      } catch { return url; }
    }
    function openFromCard(card) {
      const url   = card.getAttribute('data-embed');
      if (!url || url === 'about:blank') return;

      const rect  = card.getBoundingClientRect();
      const start = { left: rect.left, top: rect.top, width: rect.width, height: rect.height };

      const backdrop = document.createElement('div');
      backdrop.className = 'expander-backdrop';
      document.body.appendChild(backdrop);
      requestAnimationFrame(()=>backdrop.classList.add('is-visible'));

      const expander = document.createElement('div');
      expander.className = 'expander is-animating';
      Object.assign(expander.style, { left: `${start.left}px`, top: `${start.top}px`, width: `${start.width}px`, height: `${start.height}px`, borderRadius: '1rem' });

      expander.innerHTML = `
        <div class="expander-toolbar">
          <a href="${cleanOpenUrl(url)}" target="_blank" rel="noopener noreferrer">Open in new tab</a>
          <button type="button" id="expanderCloseBtn">Close</button>
        </div>
        <iframe title="Interactive demo" src="${url}"
                allow="clipboard-read; clipboard-write; fullscreen; autoplay"
                sandbox="allow-scripts allow-same-origin allow-forms allow-popups"
                referrerpolicy="no-referrer-when-downgrade"></iframe>
      `;
      document.body.appendChild(expander);

      const prevOverflow = document.body.style.overflow;
      document.body.style.overflow = 'hidden';

      const maxW = Math.min(window.innerWidth * 0.92, 1152);
      const maxH = Math.round(window.innerHeight * 0.82);
      const target = {
        width:  Math.round(maxW),
        height: Math.round(maxH),
        left:   Math.round((window.innerWidth - maxW) / 2),
        top:    Math.round((window.innerHeight - maxH) / 2)
      };

      requestAnimationFrame(() => {
        Object.assign(expander.style, {
          left: `${target.left}px`, top: `${target.top}px`,
          width: `${target.width}px`, height: `${target.height}px`,
          borderRadius: '1rem'
        });
      });

      const close = () => {
        Object.assign(expander.style, {
          left: `${start.left}px`, top: `${start.top}px`,
          width: `${start.width}px`, height: `${start.height}px`, borderRadius: '1rem'
        });
        backdrop.classList.remove('is-visible');

        const cleanup = () => {
          expander.remove(); backdrop.remove();
          document.body.style.overflow = prevOverflow;
          window.removeEventListener('keydown', onEsc);
        };
        expander.addEventListener('transitionend', cleanup, { once:true });
      };

      const onEsc = (e)=>{ if (e.key === 'Escape') close(); };
      window.addEventListener('keydown', onEsc);
      expander.querySelector('#expanderCloseBtn').addEventListener('click', close);
      backdrop.addEventListener('click', close);
    }
    document.querySelectorAll('#showcase article[data-embed]').forEach(card => {
      const open = () => openFromCard(card);
      card.addEventListener('click', open);
      card.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); open(); } });
    });

    // ---------- Modal (How it works) ----------
    const howBtn = document.getElementById('howBtn');
    const howBackdrop = document.getElementById('howBackdrop');
    const howPanel = document.getElementById('howPanel');
    const howClose = document.getElementById('howClose');

    function openHow(){
      howBackdrop.classList.add('is-open');
      howPanel.classList.add('is-open');
      howPanel.setAttribute('aria-hidden','false');
      document.body.style.overflow = 'hidden';
    }
    function closeHow(){
      howBackdrop.classList.remove('is-open');
      howPanel.classList.remove('is-open');
      howPanel.setAttribute('aria-hidden','true');
      document.body.style.overflow = '';
    }
    if (howBtn) howBtn.addEventListener('click', openHow);
    if (howClose) howClose.addEventListener('click', closeHow);
    if (howBackdrop) howBackdrop.addEventListener('click', closeHow);
    window.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeHow(); });
  </script>
</body>
</html>
