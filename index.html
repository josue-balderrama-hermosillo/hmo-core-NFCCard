<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Josue Balderrama ‚Äî Digital Card</title>
  <meta name="description" content="BIM/VDC Innovation ‚Äî Hermosillo & BIM GEN. Connect, view demos, and save contact." />
  <!-- Open Graph -->
  <meta property="og:title" content="Josue Balderrama ‚Äî Digital Card" />
  <meta property="og:description" content="BIM/VDC Innovation ‚Äî Hermosillo & BIM GEN. Connect, view demos, and save contact." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://placehold.co/1200x630/png?text=Josue+Balderrama+%7C+Hermosillo+%26+BIM+GEN" />
  <meta name="theme-color" content="#FF6A00" />

  <!-- Inter font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">

  <!-- Tailwind via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { theme: { extend: { borderRadius: { '2xl': '1.25rem' }, boxShadow: { soft: '0 10px 30px rgba(0,0,0,0.08)' } } } }
  </script>

  <!-- Icons + QR -->
  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/qrious@4.0.2/dist/qrious.min.js"></script>

  <style>
    :root { --brand-orange:#FF6A00; --brand-navy:#2f3b52; --brand-gray:#F5F7FA; --mark-bg:var(--brand-orange); }
    body { font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }

    /* Utility classes powered by CSS variables (runtime-themable) */
    .bg-brand { background-color: var(--brand-orange); }
    .text-brand { color: var(--brand-orange); }
    .border-brand { border-color: var(--brand-orange); }
    .bg-brand-navy { background-color: var(--brand-navy); }
    .bg-brand-gray { background-color: var(--brand-gray); }

    /* Brand mark box (used for the square behind the main logo) */
    .brand-mark { background: var(--mark-bg); border-radius:.5rem; display:grid; place-items:center; overflow:hidden; }
    .brand-mark img { width:100%; height:100%; object-fit:contain; object-position:center; }

    /* AU image (rounded, no badge) */
    .au-logo img { height:28px; width:auto; display:block; border-radius:.5rem; }
    @media (min-width: 640px) { .au-logo img { height:32px; } }

    /* Plain logos (footer) */
    .logo-plain { height:24px; width:auto; display:block; object-fit:contain; object-position:center; }
    @media (min-width: 640px) { .logo-plain { height:28px; } }
  .switch-btn{transition:all .15s ease;border-width:1px}
.switch-btn img{filter:grayscale(100%) brightness(.38)} /* make all switch logos neutral grey */
#btnHmoImg{filter:grayscale(100%) brightness(.38)!important} /* Hermosillo asset was white -> make it grey */
.switch-btn.is-inactive img{opacity:.75}
.switch-btn.is-active{border-color:var(--brand-orange);border-width:2px}
.switch-btn:active{transform:scale(.98)}
.switch-hint{user-select:none}
.footer-logo{height:28px;width:auto;display:block}
@media (min-width:640px){.footer-logo{height:32px}}
</style>
</head>
<body class="bg-white text-slate-800">
  <script>
    /* =============================
       THEME + CONTENT CONFIGURATION
       ============================= */
    const THEMES = {
      hmo: {
        key: 'hmo',
        name: 'HERMOSILLO',
        tagline: 'Experience Matters¬Æ',
        colors: { orange: '#FF6A00', navy: '#2f3b52', gray: '#F5F7FA' },
        markBg: 'var(--brand-orange)',
        logos: {
          mark: 'https://raw.githubusercontent.com/josue-balderrama-hermosillo/hmo-core-NFCCard/1df5fa35829ad8380eb70e3e75e1d0f3f2dffa95/H2.png',
          wordmark: 'https://raw.githubusercontent.com/josue-balderrama-hermosillo/hmo-core-NFCCard/1df5fa35829ad8380eb70e3e75e1d0f3f2dffa95/H2.png',
          footer: 'https://hermosillo.com/wp-content/uploads/2019/08/horizontal-hermosillo-experience-matters-registered-logo.png' // optional footer-only wordmark (transparent background). Set URL when available.
        },
        site: { url: 'https://hermosillo.com', label: 'hermosillo.com' },
        partner: { name: 'BIM ‚Ä¢ GEN', url: 'https://bim-gen.com', logo: 'https://raw.githubusercontent.com/josue-balderrama-hermosillo/hmo-core-NFCCard/refs/heads/main/Logo%20BIM%20GEN%20V1%20Morado.png' },
        contact: {
          name: 'Josue Balderrama',
          org: 'Hermosillo',
          titles: 'Core Innovation Lead; Innovation Manager; BIM Specialist',
          email: 'josue.balderrama@hermosillo.com',
          phone: '+528441226347',
          address: {
            street: 'Blvd. Antonio L. Rodriguez 2100 Piso 16-01', city: 'Monterrey', region: 'NL', postal: '64650', country: 'MX'
          }
        },
        heroOrgLine: 'Hermosillo ‚Äî Design & Construction'
      },
      bimgen: {
        key: 'bimgen',
        name: 'BIM ‚Ä¢ GEN',
        tagline: 'Automation & AI',
        colors: { orange: '#7C3AED', navy: '#0f172a', gray: '#F6F7FB' }, // violet + slate-900
        markBg: 'var(--brand-orange)',
        logos: {
          mark: 'https://raw.githubusercontent.com/josue-balderrama-hermosillo/hmo-core-NFCCard/refs/heads/main/Logo%20BIM%20GEN%20V1%20Blanco.png',
          wordmark: 'https://raw.githubusercontent.com/josue-balderrama-hermosillo/hmo-core-NFCCard/refs/heads/main/Logo%20BIM%20GEN%20V1%20Blanco.png'
        },
        site: { url: 'https://bim-gen.com', label: 'bim-gen.com' },
        partner: { name: 'Hermosillo', url: 'https://hermosillo.com', logo: 'https://hermosillo.com/wp-content/uploads/2019/08/horizontal-hermosillo-experience-matters-registered-logo.png' },
        contact: {
          name: 'Josue Balderrama',
          org: 'BIM GEN',
          titles: 'Partner; Innovation & BIM',
          email: 'REPLACE_ME@bim-gen.com', // ‚Üê update when you have the official inbox
          phone: '+528441226347',
          address: {
            street: 'Blvd. Antonio L. Rodriguez 2100 Piso 16-01', city: 'Monterrey', region: 'NL', postal: '64650', country: 'MX'
          }
        },
        heroOrgLine: 'BIM GEN ‚Äî Consulting & Automation'
      }
    };

    // Helpers
    const $ = (sel) => document.querySelector(sel);
    const setVar = (k, v) => document.documentElement.style.setProperty(k, v);

    let currentThemeKey = (new URLSearchParams(location.search)).get('brand') || localStorage.getItem('brand') || 'hmo';
    if (!THEMES[currentThemeKey]) currentThemeKey = 'hmo';

    function applyTheme(key) {
      const t = THEMES[key];
      currentThemeKey = key;
      localStorage.setItem('brand', key);

      // Colors as CSS variables (for runtime swap)
      setVar('--brand-orange', t.colors.orange);
      setVar('--brand-navy', t.colors.navy);
      setVar('--brand-gray', t.colors.gray);
      setVar('--mark-bg', t.markBg);

      // Header brand
      $('#brandName').textContent = t.name;
      $('#brandTagline').textContent = t.tagline;

      // Logos
      $('#logoSmall').src = t.logos.mark;
      $('#logoHero').src  = t.logos.mark;
      $('#auLogo').src    = 'https://raw.githubusercontent.com/josue-balderrama-hermosillo/hmo-core-NFCCard/1df5fa35829ad8380eb70e3e75e1d0f3f2dffa95/upscalemedia-transformed.png';

      // Footer + partner swap
      $('#logoFooterMain').src = t.logos.footer || t.logos.wordmark || t.logos.mark;
      $('#logoFooterMainLink').href = t.site.url;
      $('#partnerLogo').src = t.partner.logo;
      $('#partnerLogoLink').href = t.partner.url;

      // Contact (hero + contact section)
      $('#nameText').textContent = t.contact.name;
      $('#titlesText').textContent = t.contact.titles;
      $('#orgLine').textContent = t.heroOrgLine;
      $('#taglineHero').textContent = t.tagline;

      $('#mailLink').href = `mailto:${t.contact.email}`;
      $('#mailLink').textContent = t.contact.email;
      $('#phoneLink').href = `tel:${t.contact.phone}`;
      $('#phoneLink').textContent = formatPhone(t.contact.phone);
      $('#siteLink').href = t.site.url; $('#siteLink').textContent = t.site.label;

      // vCard builder uses current theme on click

      // Update URL (without reload) to keep sharable theme param
      const url = new URL(location.href);
      url.searchParams.set('brand', key);
      history.replaceState({}, '', url);

      // Share field + QR refresh to themed URL
      const shareUrl = url.toString();
      $('#shareUrl').value = shareUrl;
      $('#linkCode').textContent = shareUrl;
      if (window.__qrInstance) { window.__qrInstance.set({ value: shareUrl }); }

      // Update active state on selector
      $('#themeSelect').value = key;
    }

    function formatPhone(p) { return p.replace(/^\+52(\d{3})(\d{3})(\d{4})$/, '+52 ($1) $2 $3'); }
  </script>

  <!-- NAV / HEADER -->
  <header class="sticky top-0 z-40 bg-white/80 backdrop-blur border-b border-slate-200">
    <div class="max-w-6xl mx-auto px-4 h-16 flex items-center justify-between gap-3">
      <div class="flex items-center gap-3 min-w-0">
        <!-- Brand mark (square in theme color) -->
        <div class="w-7 h-7 brand-mark">
          <img id="logoSmall" alt="Brand mark" />
        </div>
        <div class="truncate">
          <span id="brandName" class="font-extrabold tracking-tight"></span>
          <span class="text-slate-400">‚Ä¢</span>
          <span id="brandTagline" class="text-brand font-semibold"></span>
        </div>
      </div>

      <nav class="hidden sm:flex items-center gap-4 text-sm">
        <a href="#showcase" class="hover:text-brand">Demos</a>
        <a href="#ar" class="hover:text-brand">AR</a>
        <a href="#contact" class="hover:text-brand">Contact</a>
      </nav>

      <!-- Theme selector + AU logo -->
      <div class="flex items-center gap-3">
        <div class="flex flex-col items-end gap-1">
          <span class="switch-hint text-[11px] text-slate-500 hidden sm:inline">Tap a logo to switch</span>
          <div id="brandSwitch" class="flex items-center gap-2">
            <button id="btnHmo" class="switch-btn is-inactive inline-flex items-center gap-2 rounded-xl border border-slate-300 px-2 py-1 bg-white" type="button" aria-pressed="false" title="Switch to Hermosillo">
              <img id="btnHmoImg" class="h-6 w-auto" alt="Hermosillo logo"/>
              <span class="text-xs font-semibold hidden sm:inline">Hermosillo</span>
            </button>
            <button id="btnBimgen" class="switch-btn is-inactive inline-flex items-center gap-2 rounded-xl border border-slate-300 px-2 py-1 bg-white" type="button" aria-pressed="false" title="Switch to BIM GEN">
              <img id="btnBimgenImg" class="h-6 w-auto" alt="BIM GEN logo"/>
              <span class="text-xs font-semibold hidden sm:inline">BIM ‚Ä¢ GEN</span>
            </button>
          </div>
        </div>
        <div class="hidden sm:flex items-center gap-2 au-logo">
          <span class="text-xs text-slate-500">AU 2025 Speaker</span>
          <img id="auLogo" alt="Autodesk University" />
        </div>
      </div>
      </div>
    </div>
  </header>

  <!-- HERO / DIGITAL CARD -->
  <section class="relative">
    <div class="max-w-6xl mx-auto px-4 py-12 grid lg:grid-cols-2 gap-10 items-center">
      <!-- Left: Card visual -->
      <div>
        <div class="bg-brand-navy text-white rounded-2xl p-6 shadow-soft relative overflow-hidden">
          <div class="absolute -right-8 -top-8 w-40 h-40 rounded-full bg-white/5"></div>
          <div class="flex items-center gap-4">
            <!-- Big brand mark in square -->
            <div class="w-12 h-12 brand-mark">
              <img id="logoHero" alt="Brand" />
            </div>
            <div class="min-w-0">
              <p id="orgLine" class="text-sm text-slate-300"></p>
              <p id="taglineHero" class="text-xs text-brand font-semibold"></p>
            </div>
          </div>

          <div class="mt-6">
            <h1 id="nameText" class="text-3xl font-extrabold tracking-tight">Josue Balderrama</h1>
            <p id="titlesText" class="text-slate-300">Core Innovation Lead ‚Ä¢ Innovation Manager ‚Ä¢ BIM Specialist</p>
          </div>

          <div class="mt-6 grid gap-2 text-sm">
            <div class="flex items-center gap-2"><i data-lucide="mail" class="w-4 h-4"></i> <a id="mailLink" class="underline-offset-2 hover:underline" href="#">email</a></div>
            <div class="flex items-center gap-2"><i data-lucide="phone" class="w-4 h-4"></i> <a id="phoneLink" class="underline-offset-2 hover:underline" href="#">phone</a></div>
            <div class="flex items-center gap-2"><i data-lucide="map-pin" class="w-4 h-4"></i> Monterrey, MX</div>
          </div>

          <div class="mt-6 flex flex-wrap gap-3">
            <button id="saveVcf" class="px-4 py-2 rounded-xl bg-white text-slate-900 font-semibold hover:opacity-90">Save Contact (.vcf)</button>
            <a href="https://www.linkedin.com/in/josuebalderrama/" target="_blank" class="px-4 py-2 rounded-xl border border-white/30 hover:bg-white/10">LinkedIn</a>
            <a href="#showcase" class="px-4 py-2 rounded-xl bg-brand text-white font-semibold hover:opacity-90">See Demos</a>
          </div>
        </div>

        <p class="text-xs text-slate-500 mt-3">Scan the QR or tap an NFC card to open this page anywhere.</p>
        <div class="mt-4 flex items-center gap-4">
          <canvas id="qr" class="rounded-2xl border border-slate-200"></canvas>
          <div>
            <p class="text-sm text-slate-600">Link:</p>
            <code id="linkCode" class="text-xs bg-slate-100 px-2 py-1 rounded">(auto)</code>
          </div>
        </div>
      </div>

      <!-- Right: Why this is different -->
      <div>
        <h2 class="text-2xl font-extrabold tracking-tight">A business card that actually does things.</h2>
        <p class="mt-3 text-slate-600">
          This digital card isn‚Äôt a static vCard. It‚Äôs an interactive microsite with live demos, an AR spot, and a one-tap
          <span class="font-semibold">Save Contact</span>. Switch the focus brand in the header to change colors, logos, and contact data.
        </p>
        <div class="mt-6 flex flex-wrap gap-2">
          <span class="pill inline-flex items-center gap-2 px-3 py-1 rounded-full border border-slate-200 text-slate-700">‚ö° NFC + Dynamic QR</span>
          <span class="pill inline-flex items-center gap-2 px-3 py-1 rounded-full border border-slate-200 text-slate-700">üìä Live dashboards</span>
          <span class="pill inline-flex items-center gap-2 px-3 py-1 rounded-full border border-slate-200 text-slate-700">üß† AI intro bot (optional)</span>
          <span class="pill inline-flex items-center gap-2 px-3 py-1 rounded-full border border-slate-200 text-slate-700">üõ†Ô∏è ACC / APS demos</span>
        </div>
      </div>
    </div>
  </section>

  <!-- SHOWCASE -->
  <section id="showcase" class="bg-brand-gray py-12">
    <div class="max-w-6xl mx-auto px-4">
      <div class="flex items-baseline justify-between">
        <h3 class="text-xl font-bold">Showcase ‚Äî Innovation in Action</h3>
        <a href="https://conferences.autodesk.com/flow/autodesk/au2025/sessioncatalog/page/inperson/session/1744090156490001WazM" target="_blank" class="text-brand text-sm font-semibold">AU 2025 ‚Üí</a>
      </div>
      <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-6">
        <!-- Card 1 -->
        <article class="rounded-2xl bg-white shadow-soft border border-slate-100 overflow-hidden">
          <div class="aspect-video bg-slate-200 grid place-items-center text-slate-500">Dashboard Preview</div>
          <div class="p-4">
            <h4 class="font-semibold">ACC Dashboards Overnight</h4>
            <p class="text-sm text-slate-600">Automated data pipelines from ACC to live dashboards. Nightly refresh, zero manual work.</p>
            <a class="text-brand font-semibold text-sm" href="#" target="_blank">Open demo</a>
          </div>
        </article>
        <!-- Card 2 -->
        <article class="rounded-2xl bg-white shadow-soft border border-slate-100 overflow-hidden">
          <div class="aspect-video bg-slate-200 grid place-items-center text-slate-500">One-Click Project Setup</div>
          <div class="p-4">
            <h4 class="font-semibold">ACC Project Setup (1-Click)</h4>
            <p class="text-sm text-slate-600">Templates configure permissions, folders, issues, reviews, and Build sheets automatically.</p>
            <a class="text-brand font-semibold text-sm" href="#" target="_blank">Open demo</a>
          </div>
        </article>
        <!-- Card 3 -->
        <article class="rounded-2xl bg-white shadow-soft border border-slate-100 overflow-hidden">
          <div class="aspect-video bg-slate-200 grid place-items-center text-slate-500">Parametric Budgeting</div>
          <div class="p-4">
            <h4 class="font-semibold">Parametric Budgeting</h4>
            <p class="text-sm text-slate-600">Phone-style UI with live 3D preview and cost breakdown. Built for rapid scenario testing.</p>
            <a class="text-brand font-semibold text-sm" href="#" target="_blank">Open demo</a>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- AR SPOT -->
  <section id="ar" class="py-12">
    <div class="max-w-6xl mx-auto px-4 grid lg:grid-cols-2 gap-10 items-center">
      <div>
        <h3 class="text-xl font-bold">AR Spot ‚Äî See it in your space</h3>
        <p class="mt-2 text-slate-600">Scan the QR to launch a WebAR demo (e.g., tilt-up panel or an interactive asset dashboard). Swap the link below with your 8thWall/A-Frame/Three.js scene.</p>
        <div class="mt-4 flex gap-3">
          <a id="arLink" href="https://example.com/webar-demo" target="_blank" class="px-4 py-2 rounded-xl bg-brand text-white font-semibold">Launch AR Demo</a>
          <a href="#" class="px-4 py-2 rounded-xl border border-slate-300">How it works</a>
        </div>
      </div>
      <div class="rounded-2xl border border-slate-200 p-6">
        <div class="aspect-video bg-slate-100 grid place-items-center text-slate-500 rounded-xl">AR Placeholder / Poster</div>
        <p class="text-xs text-slate-500 mt-3">Tip: include a simple marker/target image here for fallback tracking.</p>
      </div>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact" class="bg-brand-navy text-white py-12">
    <div class="max-w-6xl mx-auto px-4 grid md:grid-cols-2 gap-10 items-center">
      <div>
        <h3 class="text-2xl font-extrabold tracking-tight">Let‚Äôs connect</h3>
        <p class="mt-2 text-white/80">Open to collabs around ACC automations, APS integrations, and BIM/VDC innovation.</p>
        <div class="mt-6 grid gap-2 text-sm">
          <div class="flex items-center gap-2"><i data-lucide="mail" class="w-4 h-4"></i> <a id="mailLink2" class="hover:underline" href="#">email</a></div>
          <div class="flex items-center gap-2"><i data-lucide="phone" class="w-4 h-4"></i> <a id="phoneLink2" class="hover:underline" href="#">phone</a></div>
          <div class="flex items-center gap-2"><i data-lucide="globe" class="w-4 h-4"></i> <a id="siteLink" class="hover:underline" href="#" target="_blank">site</a></div>
          <div class="flex items-center gap-2"><i data-lucide="linkedin" class="w-4 h-4"></i> <a class="hover:underline" href="https://www.linkedin.com/in/josuebalderrama/" target="_blank">LinkedIn</a></div>
        </div>
      </div>
      <div class="bg-white text-slate-800 rounded-2xl p-6 shadow-soft">
        <h4 class="font-semibold">Share this card</h4>
        <p class="text-sm text-slate-600">Tap the NFC card or scan the QR. You can also copy the link below.</p>
        <div class="mt-4 flex items-center gap-2">
          <input id="shareUrl" class="flex-1 rounded-xl border border-slate-300 px-3 py-2" value="" readonly>
          <button id="copyBtn" class="px-3 py-2 rounded-xl bg-brand text-white font-semibold">Copy</button>
        </div>
        <p id="copiedMsg" class="text-xs text-green-600 mt-2 hidden">Copied!</p>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="py-8 text-center text-sm text-slate-500">
    <div class="max-w-6xl mx-auto px-4">
      <div class="flex items-center justify-center gap-3">
        <!-- Main brand wordmark (clickable) -->
        <a id="logoFooterMainLink" href="#" target="_blank" rel="noopener">
          <img id="logoFooterMain" class="footer-logo object-contain" alt="Main brand" />
        </a>
        <span>‚Ä¢</span>
        <!-- Partner logo (clickable) -->
        <a id="partnerLogoLink" href="#" target="_blank" rel="noopener">
          <img id="partnerLogo" class="footer-logo object-contain" alt="Partner logo" />
        </a>
      </div>
      <p class="mt-2">¬© <span id="year"></span> Josue Balderrama ‚Äî Core Innovation Lead</p>
    </div>
  </footer>

  <script>
    // Icons
    lucide.createIcons();

    // QR init (store instance for later updates)
    const qrElem = document.getElementById('qr');
    window.__qrInstance = new QRious({ element: qrElem, value: location.href, size: 120, level: 'M' });

    // Share URL init (will be overwritten by applyTheme)
    document.getElementById('shareUrl').value = location.href;
    document.getElementById('linkCode').textContent = location.href;

    // Copy link
    document.getElementById('copyBtn').addEventListener('click', async () => {
      await navigator.clipboard.writeText(document.getElementById('shareUrl').value);
      document.getElementById('copiedMsg').classList.remove('hidden');
      setTimeout(() => document.getElementById('copiedMsg').classList.add('hidden'), 1500);
    });

    // Brand switch buttons + UI state
function updateSwitchUI(key){
  const h=document.getElementById('btnHmo');
  const b=document.getElementById('btnBimgen');
  [h,b].forEach(btn=>{btn.classList.remove('is-active');btn.classList.add('is-inactive');btn.setAttribute('aria-pressed','false');});
  const active = key==='bimgen'? b : h;
  active.classList.add('is-active');
  active.classList.remove('is-inactive');
  active.setAttribute('aria-pressed','true');
}
// Set button logos
try{
  document.getElementById('btnHmoImg').src = THEMES.hmo.logos.mark;
  document.getElementById('btnBimgenImg').src = THEMES.bimgen.logos.mark;
}catch{ /* ignore if DOM not yet parsed */ }
// Click handlers
const btnHmo = document.getElementById('btnHmo');
const btnBimgen = document.getElementById('btnBimgen');
if(btnHmo) btnHmo.addEventListener('click', ()=>applyTheme('hmo'));
if(btnBimgen) btnBimgen.addEventListener('click', ()=>applyTheme('bimgen'));

    // Save VCF (vCard) dynamically using active theme
    function buildVCard(t) {
      const a = t.contact.address;
      return `BEGIN:VCARD\nVERSION:3.0\nN:${t.contact.name.split(' ').slice(-1)[0]};${t.contact.name.split(' ').slice(0,-1).join(' ')};;;\nFN:${t.contact.name}\nORG:${t.contact.org}\nTITLE:${t.contact.titles}\nEMAIL;TYPE=INTERNET:${t.contact.email}\nTEL;TYPE=CELL:${t.contact.phone}\nADR;TYPE=WORK:;;${a.street};${a.city};${a.region};${a.postal};${a.country}\nURL:${location.href}\nEND:VCARD`;
    }

    document.getElementById('saveVcf').addEventListener('click', () => {
      const t = THEMES[currentThemeKey];
      const vcf = buildVCard(t);
      const blob = new Blob([vcf], { type: 'text/vcard;charset=utf-8' });
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = `Contact-${t.contact.org.replace(/\s+/g,'')}.vcf`;
      a.click();
      setTimeout(() => URL.revokeObjectURL(a.href), 1000);
    });

    // Boot
    applyTheme(currentThemeKey);
    try{ updateSwitchUI(currentThemeKey); }catch{}

    // Footer year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Mirror mail/phone to contact section
    const syncContacts = () => {
      const t = THEMES[currentThemeKey];
      document.getElementById('mailLink2').href = `mailto:${t.contact.email}`;
      document.getElementById('mailLink2').textContent = t.contact.email;
      document.getElementById('phoneLink2').href = `tel:${t.contact.phone}`;
      document.getElementById('phoneLink2').textContent = (t.contact.phone);
    };
    syncContacts();
    // Re-sync on theme change (monkey-patch applyTheme to also sync)
    const _applyThemeOrig = applyTheme;
    applyTheme = function(key){ _applyThemeOrig(key); syncContacts(); };
  </script>
</body>
</html>
